user	www;

events {
	worker_connections	1024
}
http {
	include                     /etc/nginx/mime.types;
	default_type                application/octet-stream;
	sendfile                    on;
	access_log                  /var/log/nginx/access.log;
	keepalive_timeout           3000;

	server {
		listen 80;
		listen [::]:80;
		server_nanme	localhost
		return 301 https://$host$request_uri;
	}
	
	server {
		listen		443 ssl;
		listen		[::]:443 ssl;
		server_name	localhost;
		ssl_certificate	/etc/ssl/shamil.crt;
		ssl_certificate_key /etc/ssl/shamil.key;
		root		/www;
		index		index.html;
		
	location / {
		try_files $uri $uri/ =404;
	}
		
	location /wordpress {
		return 307 http://192.168.99.153:5050;	
	}
		
	location ~ \/index.php {
		return 301   http://$host/phpmyadmin/;
        }
		
	location ~ \/phpmyadmin {
       		rewrite ^/phpmyadmin(/.*)$ $1 break;
        	proxy_set_header X-Real-IP          $remote_addr;
        	proxy_set_header X-Forwarded-For    $remote_addr;
        	proxy_set_header Host               $host;
        	proxy_set_header X-Forwarded-Proto  https;
        	proxy_pass                          http://$host:5000;
    	}
 }
}
